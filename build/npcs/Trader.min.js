
function getPlayerInvFromNbt(pnbt, w) {
	var API = Java.type('noppes.npcs.api.NpcAPI').Instance();
	var pinv = pnbt.getList('Inventory', pnbt.getListType('Inventory'));
	var pitems = [];
	for(p in pinv) {
var pin = pinv[p];
		var pitm = w.createItemFromNbt(API.stringToNbt(pin.toJsonString()));
		pitems.push(pitm);
	}
	
	return pitems;
}




function init(e){
	
}

function load(e) {
	
}

function interact(e){
	
}

function timer(e){
	
}

function tick(e){
	
}

function collide(e){
	
}

function damaged(e){
	
}

function died(e){
	
}

function kill(e){
	
}

function meleeAttack(e){
	
}

function rangedAttack(e){
	
}

function target(e){
	
}

function targetLost(e){
	
}

function role(e){
	
	var role = e.npc.getRole();
	var pinv = getPlayerInvFromNbt(e.player.getEntityNbt(), e.player.world);
	if(role.getType() == 1) {
		var currencies = [
			e.currency1 != null ? e.currency1.getName(): 'minecraft:air',
			e.currency2 != null ? e.currency2.getName(): 'minecraft:air',
		];
		var hasCurs = [
			e.currency1 == null,
			e.currency2 == null,
		];
		
		for(c in currencies) {
var currn = currencies[c];
			print((e.currency1 != null ? e.currency1.getItemNbt().toJsonString():''));
			print((e.currency2 != null ? e.currency2.getItemNbt().toJsonString():''));
			pinv.forEach(function(pin){
				if(pin.getName() == currn) {
					hasCurs[c] = true;
				}
			});
		}
		
		if(!hasCurs[0] || !hasCurs[1]) {
			e.setCanceled(true);
		}
	}
}
